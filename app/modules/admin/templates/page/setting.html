{%extends 'page/admin.html'%}

{%block content%}
<main class="flex-1 overflow-x-hidden overflow-y-auto p-6">
    <form action="/setting/update" method="POST" class="max-w-5xl mx-auto space-y-6">

        <div class="bg-white p-6 rounded-sm border border-gray-200 shadow-sm" id="finance">
            <div class="flex items-center gap-3 mb-6 border-b border-gray-100 pb-4">
                <div class="p-2 bg-blue-50 text-primary rounded"><i class="ri-bank-card-line text-xl"></i></div>
                <div>
                    <h3 class="text-lg font-bold text-dark">Tài chính & Thuế (VAT)</h3>
                    <p class="text-sm text-gray-500">Cấu hình liên quan đến thanh toán và hóa đơn</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Thuế giá trị gia tăng (VAT) %</label>
                    <div class="relative">
                        <input type="number"
                               name="vat"
                               class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-primary"
                               value="{{setting[0].value}}">
                        <span class="absolute right-3 top-2 text-gray-500">%</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Áp dụng tự động cho tất cả dịch vụ khi xuất hóa đơn.</p>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tỷ lệ cọc tối thiểu</label>
                    <div class="relative">
                        <input type="number"
                               name="deposit"
                               class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-primary"
                               value="{{setting[1].value}}">
                        <span class="absolute right-3 top-2 text-gray-500">%</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-sm border border-gray-200 shadow-sm" id="staff">
            <div class="flex items-center gap-3 mb-6 border-b border-gray-100 pb-4">
                <div class="p-2 bg-orange-50 text-orange-600 rounded"><i class="ri-user-star-line text-xl"></i></div>
                <div>
                    <h3 class="text-lg font-bold text-dark">Quy định Nhân sự & KPI</h3>
                    <p class="text-sm text-gray-500">Giới hạn khối lượng công việc để đảm bảo chất lượng</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Số lịch tối đa / ngày / nhân
                        viên</label>
                    <input type="number"
                           name="max_schedule"
                           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-primary"
                           value="{{setting[3].value}}">
                    <p class="text-xs text-gray-500 mt-1">Hệ thống sẽ ẩn nhân viên nếu đạt giới hạn này.</p>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Thời gian nghỉ giữa 2 khách (Buffer
                        Time)</label>
                    <div class="relative">
                        <input type="number"
                               name="buffer_time"
                               class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-primary"
                               value="{{setting[2].value}}">
                        <span class="absolute right-3 top-2 text-gray-500">Phút</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Thời gian để dọn dẹp, chuẩn bị trước khi đón khách mới.</p>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-sm border border-gray-200 shadow-sm" id="time">
            <div class="flex items-center gap-3 mb-6 border-b border-gray-100 pb-4">
                <div class="p-2 bg-green-50 text-success rounded"><i class="ri-time-line text-xl"></i></div>
                <div>
                    <h3 class="text-lg font-bold text-dark">Thời gian hoạt động (Working Hours)</h3>
                    <p class="text-sm text-gray-500">Thiết lập giờ mở cửa mặc định cho hệ thống</p>
                </div>
            </div>

            <div class="space-y-4">
                <div class="grid grid-cols-12 gap-4 text-sm font-semibold text-gray-500 mb-2">
                    <div class="col-span-4">Giờ mở cửa</div>
                    <div class="col-span-4">Giờ đóng cửa</div>
                </div>

                <div class="grid grid-cols-12 gap-4 items-center">
                    <div class="col-span-4">
                        <select name="open_time"
                                class="w-full border border-gray-300 rounded px-2 py-1.5 bg-white focus:outline-none focus:border-primary">
                            {% for i in range(0, 24) %}
                            {% set time_str = "%02d:00" | format(i) %}
                            <option value="{{i}}" {% if setting[4].value|int == i %}selected{% endif %}>
                                {{ time_str }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="col-span-4">
                        <select name="close_time"
                                class="w-full border border-gray-300 rounded px-2 py-1.5 bg-white focus:outline-none focus:border-primary">
                             {% for i in range(0, 24) %}
                            {% set time_str = "%02d:00" | format(i) %}
                            <option value="{{i}}" {% if setting[5].value|int == i %}selected{% endif %}>
                                {{ time_str }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="sticky bottom-0 bg-gray-50 border-t border-gray-200 p-4 -mx-6 -mb-6 mt-6 flex justify-end">
            <button type="submit"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded shadow-sm flex items-center gap-2 transition-colors">
                <i class="ri-save-3-line"></i>
                Lưu thay đổi
            </button>
        </div>

    </form>
</main>
{%endblock%}