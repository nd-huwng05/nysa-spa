<div class="section-card disabled" id="step-2">
    <div class="section-header">
        <div class="step-num">2</div>
        <h5 class="step-title">Staff Allocation</h5>
    </div>


    <div id="staffContainer">
        {%for s in services%}
        {%if s.type.value == "combo"%}
        <div class="combo-box" data-id="cb1">
            <div class="combo-header">
                <div class="d-flex align-items-center">
                    <span class="combo-tag">Combo</span>
                    <span class="fw-bold text-dark">Deep Relaxation Combo</span>
                </div>
                <select class="custom-select-staff fw-bold text-primary"
                        style="border-color: var(--border-color);"
                        onchange="updateComboMaster('cb1', this.value)">
                    <option value="">--Optional--</option>
                    <option value="split">--Split--</option>
                </select>
            </div>


            {%for child in s.included_services%}
            <div>
                <div class="service-row service-item" data-id="101" data-duration="60">
                    <div class="d-flex align-items-center">
                        <img src="{{child.img_url}}" alt="{{s.name}}" onerror="this.onerror=null; this.src='https://placehold.co/600x400?text=Nysa+Spa';"
                             class="service-img">
                        <div>
                            <div class="fw-bold text-dark small">{{child.name}}</div>
                            <div class="text-muted" style="font-size:11px;">{{child.duration_minutes}} mins</div>
                        </div>
                    </div>
                    <select class="custom-select-staff child-select"
                            id="staff-select-101"
                            disabled
                            onchange="updateAllocation('101')">
                        <option value="1">Lan Anh (Master)</option>
                        <option value="2">Minh Tuan (Senior)</option>
                        <option value="3">Hong Ngoc</option>
                        <option value="4">Thanh Ha</option>
                    </select>
                </div>
            </div>
            {%endfor%}
        </div>
        {%else%}
        <div class="service-row rounded border mb-3 service-item" data-id="201" data-duration="45">
            <div class="d-flex align-items-center">
                <img src="{{s.img_url}}" alt="{{s.name}}" onerror="this.onerror=null; this.src='https://placehold.co/600x400?text=Nysa+Spa';"
                             class="service-img">
                <div>
                    <div class="fw-bold text-dark">{{s.name}}</div>
                    <div class="text-muted small">{{s.duration_minutes}} mins</div>
                </div>
            </div>
            <select class="custom-select-staff"
                    id="staff-select-201"
                    onchange="updateAllocation('201')">
                <option value="1">Lan Anh (Master)</option>
                <option value="2">Minh Tuan (Senior)</option>
                <option value="3">Hong Ngoc</option>
                <option value="4">Thanh Ha</option>
            </select>
        </div>
        {%endif%}
        {%endfor%}

    </div>
</div>
