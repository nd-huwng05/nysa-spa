<dialog id="createBookingModal" class="m-auto p-0 bg-transparent shadow-none outline-none backdrop:bg-black/60 open:animate-fade-in text-gray-800">

    <div class="w-[1100px] max-w-[95vw] h-[90vh] bg-white rounded-xl shadow-2xl flex flex-col overflow-hidden text-left font-sans">

        <div class="px-8 py-5 border-b border-gray-100 flex justify-between items-center bg-white shrink-0">
            <div>
                <h3 class="text-2xl font-bold text-gray-800 serif-font">New Booking</h3>
                <p class="text-sm text-gray-500 mt-1">Select customer & services to proceed</p>
            </div>
            <form method="dialog">
                <button class="w-10 h-10 rounded-full bg-gray-50 text-gray-500 hover:bg-red-50 hover:text-red-600 flex items-center justify-center transition cursor-pointer text-xl">
                    <i class="fas fa-times"></i>
                </button>
            </form>
        </div>

        <div class="flex flex-1 overflow-hidden">
            <div class="w-[35%] bg-[#F9F9F9] border-r border-gray-200 flex flex-col p-6">
                <div class="mb-6 relative z-20">
                    <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">1. Find Customer</label>
                    <div class="relative group">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"><i class="fas fa-search"></i></span>
                        <input type="text" id="custSearchInput" placeholder="Phone or Name..." autocomplete="off"
                               class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:border-[var(--accent-color)] focus:ring-1 focus:ring-[var(--accent-color)] outline-none text-sm shadow-sm transition"
                               oninput="window.handleCustSearch(this.value)">
                        <div id="custSearchResults" class="hidden absolute top-full left-0 w-full mt-1 bg-white rounded-lg shadow-xl border border-gray-100 max-h-64 overflow-y-auto thin-scroll z-50"></div>
                    </div>

                    <div id="newCustForm" class="hidden mt-4 p-4 bg-white rounded-lg border border-[var(--accent-color)] border-dashed shadow-sm animate-fade-in">
                        <div class="text-xs font-bold text-[var(--accent-color)] mb-2 uppercase">Create New Profile</div>
                        <input id="newCustName" class="w-full mb-2 px-3 py-2 border rounded text-sm outline-none focus:border-[var(--accent-color)]" placeholder="Full Name (*)">
                        <input id="newCustPhone" class="w-full mb-3 px-3 py-2 border rounded text-sm outline-none focus:border-[var(--accent-color)]" placeholder="Phone (*)">
                        <input id="newCustEmail" class="w-full mb-3 px-3 py-2 border rounded text-sm outline-none focus:border-[var(--accent-color)]" placeholder="Email (*)">
                        <input id="newCustAddress" class="w-full mb-3 px-3 py-2 border rounded text-sm outline-none focus:border-[var(--accent-color)]" placeholder="Address (*)">
                        <button type="button" onclick="window.saveNewCust()" class="w-full py-2 bg-[var(--accent-color)] text-white text-xs font-bold rounded hover:opacity-90 transition">SAVE CUSTOMER</button>
                    </div>
                </div>

                <div class="flex-1 flex flex-col min-h-0 z-10">
                    <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3">2. Services Menu</label>
                    <input type="text" placeholder="Filter services..." class="w-full px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm focus:border-[var(--accent-color)] outline-none mb-3" oninput="window.renderServiceMenu(this.value)">
                    <div id="serviceMenuList" class="flex-1 overflow-y-auto thin-scroll pr-1 space-y-2"></div>
                </div>
            </div>

            <div class="w-[65%] bg-white flex flex-col relative">

                <div class="h-20 border-b border-gray-100 flex items-center justify-between px-8 bg-[#FDFCFB] shrink-0">
                    <div class="flex items-center gap-4">
                        <div class="w-10 h-10 rounded-full bg-white border border-gray-200 text-[var(--accent-color)] flex items-center justify-center shadow-sm text-lg">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="text-[10px] text-gray-400 uppercase font-bold">Selected Customer</div>
                            <div id="displayCustName" class="font-bold text-gray-800 text-base">Walk-in Guest</div>
                            <div id="displayCustPhone" class="text-xs text-gray-500">No contact info</div>
                        </div>
                    </div>

                    <div class="text-right">
                        <label class="text-[10px] font-bold text-gray-400 uppercase block mb-1">Start Time (24h format)</label>
                        <div class="flex items-center gap-2">
                            <input type="date" id="bookingDate" onchange="window.handleTimeChange()" class="border border-gray-200 rounded-lg px-2 py-1.5 text-sm font-bold text-gray-700 outline-none focus:border-[var(--accent-color)]">

                            <div class="flex items-center border border-gray-200 rounded-lg bg-white px-1 focus-within:border-[var(--accent-color)]">
                                <select id="selectHour" onchange="window.handleTimeChange()" class="bg-transparent py-1.5 px-1 text-sm font-bold text-gray-700 outline-none cursor-pointer w-14 text-center">
                                    <option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option>
                                    <option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option>
                                    <option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option>
                                    <option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option>
                                    <option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option>
                                    <option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option>
                                </select>
                                <span class="text-gray-400 font-bold px-0.5">:</span>
                                <select id="selectMin" onchange="window.handleTimeChange()" class="bg-transparent py-1.5 px-1 text-sm font-bold text-gray-700 outline-none cursor-pointer w-14 text-center">
                                    <option value="00">00</option><option value="05">05</option><option value="10">10</option><option value="15">15</option>
                                    <option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option>
                                    <option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto p-8 relative bg-white thin-scroll bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]">
                    <div id="emptyState" class="absolute inset-0 flex flex-col items-center justify-center text-gray-300 pointer-events-none">
                        <i class="fas fa-spa text-6xl mb-4 opacity-20 text-[var(--accent-color)]"></i>
                        <p class="text-lg font-medium text-gray-400">Add services to the cart</p>
                    </div>
                    <div id="cartContainer" class="pb-10 space-y-4"></div>
                </div>

                <div class="bg-gray-50 border-t border-gray-200 p-6 shrink-0 shadow-[0_-4px_10px_rgba(0,0,0,0.02)] z-30">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="flex-1 bg-white border border-gray-200 rounded-lg px-4 py-2 flex items-center gap-3">
                            <i class="fas fa-ticket-alt text-[var(--accent-color)] text-lg"></i>
                            <select id="voucherSelect" onchange="window.calculateTotal()"
                                    class="w-full bg-transparent border-none text-sm p-0 focus:ring-0 text-gray-700 cursor-pointer font-medium outline-none">
                                <option value="0">No Voucher</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex justify-between items-center">
                        <div>
                            <div class="text-[10px] font-bold text-gray-400 uppercase mb-1">Total Payment</div>
                            <div id="totalPrice" class="text-3xl font-bold text-[var(--accent-color)] tracking-tight font-serif">$0.00</div>
                        </div>
                        <div class="flex gap-3">
                            <form method="dialog"><button class="px-6 py-3 rounded-lg border border-gray-300 text-gray-600 font-bold text-sm">Cancel</button></form>
                            <button onclick="window.submitBooking()" class="px-8 py-3 rounded-lg bg-[var(--accent-color)] text-white font-bold shadow-md flex items-center gap-2 text-sm hover:bg-[#a06d42] transition">
                                <span>Create Booking</span> <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>