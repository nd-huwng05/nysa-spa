<div id="qr-method-container">
    <h2 class="heading-font fs-4 text-accent mb-4">
        <i class="bi bi-qr-code-scan me-2"></i>2. Scan VietQR Code
    </h2>

    <div id="qr-placeholder-section">
        <div class="d-flex flex-column align-items-center">
            <div class="p-3 shadow-sm rounded mb-3" style="background: var(--surface-color)">
                <div id="qr-code-display">
                    {%if qr_link%}
                    <img src="{{ qr_link }}" class="img-fluid" style="max-width:250px;" alt="VietQR">
                    {%endif%}
                </div>
            </div>

            <p class="fw-bold mb-1 mt-2 small text-uppercase" style="color: var(--combo-text-subtle)">
                Deadline Payment
            </p>
            <h3 id="expiry-time-display"
                class="heading-font fw-bold fs-2 text-danger mb-3"
                data-expiry="{%if invoice%}{{invoice.expires_at}}{%endif%}"> 00:00
            </h3>

            <p class="small mt-2" style="color: var(--combo-text-subtle)" id="qr-expiry-message">
                Please do not close the browser while paying.
            </p>

            <button id="refresh-qr-btn" class="btn btn-outline-combo mt-3" style="display:none;">
                <i class="bi bi-arrow-clockwise me-1"></i> Regenerate QR Code
            </button>

            <div class="mt-4 p-3 rounded w-100 text-center" style="background: var(--surface-color-hero)">
                <p class="fw-bold mb-0" id="payment-status-message" style="color: #28a745">
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    Waiting for bank confirmation...
                </p>
            </div>
        </div>

        <div class="alert alert-warning small mt-4 mb-0 text-start border-0"
             style="background-color: #fff3cd; color: #664d03;">
            <i class="bi bi-info-circle-fill me-2"></i>Memo/Content:
            <span id="bank-transfer-content" class="fw-bold font-monospace">{%if invoice_code%}{{invoice_code}}{%endif%}</span><br>
            <span class="ms-4 opacity-75">The system will automatically confirm upon receiving the correct content.</span>
        </div>
    </div>
</div>